# Wonderlust — Airbnb-style Listings App

A small Express + MongoDB web app for creating and browsing listings with user auth, image uploads (Cloudinary), and reviews. This repository is a learning/project build (views rendered with EJS).

## Features
- User registration & login (Passport + passport-local-mongoose)
- Create, edit, delete listings (file uploads to Cloudinary)
- Add and delete reviews for listings
- Server-side validation with Joi
- Sessions stored in MongoDB (connect-mongo)

## Tech stack
- Node.js + Express
- MongoDB (Mongoose)
- EJS (templates) with `ejs-mate`
- Passport for authentication
- Multer + multer-storage-cloudinary for file uploads
- Joi for request validation

## Prerequisites
- Node.js (v16+ recommended)
- A MongoDB Atlas connection string (or local MongoDB)
- A Cloudinary account (for image uploads)

## Environment variables
Create a `.env` file in the project root (DO NOT commit secrets). The app expects these variables:

- `ATLAS_URL` — MongoDB connection string (e.g. from Atlas)
- `SECRET` — session secret
- `CLOUD_NAME` — Cloudinary cloud name
- `CLOUD_API_KEY` — Cloudinary API key
- `CLOUD_API_SECRET` — Cloudinary API secret
- `PORT` — (optional) port to run the server (defaults to 8080)

Notes: The included `.env` in this workspace contains example/real credentials; remove or rotate any secrets before sharing the repo.

## Install

Open a terminal in the project root and run:

```bash
npm install
```

## Run

Start the server with:

```bash
node app.js
```

Or, if you have nodemon installed:

```bash
nodemon app.js
```

The app will listen on `process.env.PORT` or `8080` by default.

## Available routes (overview)
- `GET /` → redirects to `/listings`
- `GET /listings` → list all listings
- `GET /listings/new` → form to create a new listing (auth required)
- `POST /listings` → create listing (auth + file upload)
- `GET /listings/:id` → show listing + reviews
- `PUT /listings/:id` → update listing (owner only)
- `DELETE /listings/:id` → delete listing (owner only)
- `POST /listings/:id/review` → create review (auth required)
- `DELETE /listings/:id/review/:reviewId` → delete review (author only)
- `GET /signup`, `POST /signup` → user registration
- `GET /login`, `POST /login` → login
- `GET /logout` → logout

## Project structure (key files)
- `app.js` — application entry and middleware setup
- `cloudConfig.js` — Cloudinary configuration
- `schema.js` — Joi schemas for validation
- `models/` — Mongoose models (`listing.js`, `review.js`, `user.js`)
- `controllers/` — route handlers
- `routes/` — Express routers
- `utility/` — helper utilities (error class, async wrapper)
- `views/` — EJS templates
- `public/` — static assets (CSS, client JS)

## Notes & gotchas
- The app uses `dotenv` when `NODE_ENV` is not `production`.
- Sessions are persisted in MongoDB via `connect-mongo`.
- Uploaded images are stored in Cloudinary; ensure your Cloudinary credentials are valid.
- The `.env` in this workspace contains credentials; do not publish them. If you plan to push to a public repo, remove or rotate secrets first.
- The `package.json` currently contains only a `test` script. Use `node app.js` or add a `start` script if you prefer.

## Next steps / suggestions
- Add a `start` script to `package.json` (e.g. `"start": "node app.js"`).
- Add basic tests and linting.
- Add CI (GitHub Actions) and .env example file like `.env.example` with placeholders.

---
Generated by GitHub Copilot assistant — quick project README.
